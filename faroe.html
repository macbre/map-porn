<!DOCTYPE html> 
<html>
	<title>Faroe Islands - map</title>

	<!-- fonts -->
	<link href="https://fonts.googleapis.com/css2?family=Gudea:wght@400;700&family=Josefin+Sans:wght@100;600&family=Lora:ital,wght@0,400;0,600;1,400;1,600&display=swap" rel="stylesheet">

	<!-- leaflet -->
	<script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"/>
	<script src="static/leaflet-providers.js"></script>
	<script src="static/L.Graticule.js"></script>

	<!-- our assets -->
	<link rel="stylesheet" href="static/map.css">
	<script src="static/map.js"></script>
	<script src="static/faroe.js"></script>

	<link rel="license" href="https://creativecommons.org/licenses/by/4.0/" />

	<body lang="en" _lang="pl">
		<div id="wrapper">
			<section id="overlay">
				<h1 lang="en">Faroe Islands</h1>
				<h1 lang="pl">Wyspy Owcze</h1>

				<h2 lang="en">Energy supply</h2>
				<h2 lang="pl">≈πr√≥d≈Ça energii</h2>

				<legend style="width: 41%">
					<!-- <img src="https://3.bp.blogspot.com/-d6oBGCensQ8/U2ADslYwc4I/AAAAAAAAIXM/SSR4NbDTxP8/s1600/IMG_0500.jpg"> -->
					<p lang="en">
						Historically, <b>peat has been used for heating</b> and cooking on Faroe Islands.
						The pioneer √ìlavur √° Heygum conducted the <b>hydropower experiments</b> in Vestmanna in 1907. The first hydropower plant, commissioned in 1921, <b>remains operational today</b>.
						<br><br>
						SEV ‚Äî jointly owned by the municipalities ‚Äî was founded in 1946 and is responsible for the electricity supply.
						<br><br>
						The <b>first wind turbines</b> on the Islands were installed in 1993.
						The <b>biogas plant</b> F√ñRKA outside T√≥rshavn was put into operation in 2020, and the <b>solar plant trial</b> on Su√∞uroy started a year earlier..
						<br><br>
						In February 2024 <b>tidal powerplant in Vestmanna</b> delivered its first electricity to the national grid.
						<br><br>
						Vision 2030 sets the goal for <b>all electricity on Faroese land to come from green energy sources by 2030</b>.
					</p>
					<p lang="pl" _style="font-size: 1.6rem">
						Podstawowym paliwem na Wyspach Owczych by≈Ç przez wieki <b>torf</b>. Pionierskie pr√≥by zwiƒÖzane z pozyskaniem <b>energii z mas wody</b> podjƒÖ≈Ç w roku 1907 √ìlavur √° Heygum.
						Pierwsza, uruchomiona w 1921 r. na Su√∞uroy, hydroelektrownia dzia≈Ça do dzi≈õ.
						<br><br>
						SamorzƒÖdowa sp√≥≈Çka odpowiedzialna za dostawy energii elektrycznej powsta≈Ça w 1946 roku.
						<br><br>
						Pierwsze <b>turbiny wiatrowe</b> zainstalowano w roku 1993. W roku 2020 na op≈Çotkach T√≥rshavn rozpoczƒôto produkcjƒô <b>energii z biogazu</b>, za≈õ rok wcze≈õniej ruszy≈Çy testy <b>farmy paneli s≈Çonecznych</b> (!) na Su√∞uroy.
						<br><br>
						W lutym 2024 r. do sieci trafi≈Ç prƒÖd z instalacji pozyskujƒÖcej <b>energiƒô z fal morskich w Vestmannie</b>.
						<br><br>
						Cel "Vision 2030" zak≈Çada <b>pozyskiwanie energii elektrycznej na Wyspach Owczych wy≈ÇƒÖczenie ze ≈∫r√≥de≈Ç odnowialnych</b>.
					</p>
					<ul>
						<!--<li><span class="marker black"></span><span lang="en">major towns</span><span lang="pl">g≈Ç√≥wne miasta</span></li>-->
					</ul>
				</legend>

				<label id="atlantic-ocean">
					<span lang="en">Atlantic Ocean</span>
					<span lang="pl">Ocean Atlantycki</span>
				</label>

				<section id="small-map">

				</section>

				<!-- <label style="
				position: absolute;
				font-size: 12em;
				filter: grayscale(1);
				top: 1121px;
				left: 871px;
				transform: rotate(28deg);
				opacity: .8;
				">
					üêë
				</label> -->
			</section>

			<img id="logo" src="static/logo.png" />

			<div id="map"></div>
			<section class="info">
				<div>
					<p>
						<strong lang="en">Research</strong><strong lang="pl">Opracowanie</strong>: Maciej Brencz @ farerskiekadry.pl
					</p>
					<p>
						<strong lang="en">Data</strong><strong lang="pl">Dane</strong>: <!-- Landsverk, Umhv√∏rvisstovan, Strandfaraskip Landsins, -->SEV, OpenStreetMaps, trap.fo
					</p>
				</div>

				<div>
					<p>
						<strong lang="en">Maps rendered with</strong><strong lang="pl">Mapy</strong> Leaflet, Stamen.
					</p>
					<p lang="en">
						<strong>Licensed under</strong> Creative Commons Attribution.
					</p>
					<p lang="pl">
						<strong>Licencja</strong> Creative Commons Uznanie autorstwa.
					</p>
				</div>
			</section>
		</section>

		<script>
		(async() => {			
			const colors = [
				'blue', 'yellow', 'green', 'red', 'dark-green', 'orange'
			];

			await initMap(async (map) => {
				// green / blue / yellow
				// await addGeoJSONLayer(map, '/geojson/osm-natural-peak.json', 'blue', 'peak', 'wzniesienie', (feature) => {
				// 	// const city = feature.properties.city;

				// 	// add additional marker for the shadow effect
				// 	const geo = feature.geometry.coordinates;
				// 	const color = 'green';
            	// 	L.marker([geo[1], geo[0]], {icon: getIcon(color), pane: `markers-${color}`}).addTo(map);
				// });
				let counts = [];

				L.geoJSON(await fetchGeoJSON('/geojson/osm-power-plant.json'), {
					onEachFeature: feature => {
						const geo = feature.geometry.coordinates;

						// duplicated entry on Mykines
						if (geo[0] == -7.6462321) return;

						// "plant:source": "biogas",
						const type = feature.properties['plant:source']; console.log({geo, type});
						let color = 'black';

						switch(type) {
							case 'hydro':  color = 'blue';   break;
							case 'oil':    color = 'black';  break;
							case 'solar':  color = 'red';    break;
							case 'biogas': color = 'green';  break;
							case 'tidal':  color = 'orange'; break;
						}

						L.marker([geo[1], geo[0]], {icon: getIcon(color), pane: `markers-${color}`}).addTo(map);

						// count colors
						if (!counts[color]) counts[color] = 0;
						counts[color]++;
					}
				});

				L.geoJSON(await fetchGeoJSON('/geojson/us-Kortal-SEV-4-vindmylla.json'), {
					onEachFeature: feature => {
						const geo = feature.geometry.coordinates;
						const color = 'dark-green';

						L.marker([geo[1], geo[0]], {icon: getIcon(color), pane: `markers-${color}`}).addTo(map);

						// count colors
						if (!counts[color]) counts[color] = 0;
						counts[color]++;
					}
				});

				addLabel('dark-green', 'Wind turbine', 'Turbina wiatrowa', counts['dark-green']);
				addLabel('blue', 'Hydropower plant', 'Elektrownia wodna', counts['blue']);
				addLabel('black', 'Oil plant / diesel generator', 'Paliwa kopalne', counts['black']);
				addLabel('red', 'Solar plant', 'Energia s≈Çoneczna', counts['red']);
				addLabel('green', 'Biogas plant', 'Biogaz', counts['green']);
				addLabel('orange', 'Tidal plant', 'Fale morskie', counts['orange']);
			});

			// console.log(gridsPerCity);
		})();
		</script>

		<style>
			legend p {
				font-size: 2.8em;
			}

			/**
			 * Mountains
			 * @see https://css-tricks.com/snippets/css/css-triangle/
			 *
			.marker {
				width: 0; 
				height: 0; 
				border-left: var(--marker-size) solid transparent;
				border-right: var(--marker-size) solid transparent;
				border-bottom: var(--marker-size) solid black;
				border-radius: 0;
				outline: none;
				content: '';
				background-color: transparent !important;
				transform: rotateY(65deg);
				position: relative;
				left: -5px;
			}

			.marker.green  { border-bottom-color: #a6d96a }
			.marker.dark-green  { border-bottom-color: #006837 }
			.marker.blue   { border-bottom-color: #4575b4 } /* https://colorbrewer2.org/#type=diverging&scheme=RdYlBu&n=10 
			.marker.yellow { border-bottom-color: #e9bb3a }
			.marker.red    { border-bottom-color: #d73027 }

			/**
			 * @see https://developer.mozilla.org/en-US/docs/Web/CSS/gradient/conic-gradient
			 */
			 /**
			.marker.red {
				background: conic-gradient(transparent 0, transparent 180deg, #d73027 180deg);
			}
			.marker.green { 
				background: conic-gradient(#1a9850 0, #1a9850 180deg, transparent 180deg);
			}
			/**/

			/* marker with letters for better color-blind support 
			.marker::before {
				color: #fff;
				font-style: italic;
				font-weight: bold;
				font-size: 1.1em;
				position: relative;
				left: 25%;
				top: -10%;
				text-shadow: 1px 1px rgba(0,0,0,.5);
			}

			legend .marker::before {
				font-size: .7em;
				top: -24px;
				left: 2px;
			}

			.marker.green::before {
				color: #000;
				content: 'd';
			}

			.marker.blue::before { 
				content: 'v';
			}

			.marker.yellow::before { 
				color: #000;
				content: 'n';
			}

			.marker.red::before { 
				content: 'f';
			}

			.marker.dark-green::before { 
				content: '√°';
			}
			**/

			/* lighthouses lighty shadow *
			.marker.blue {
				opacity: 0.75;
			}

			.marker.green {
				box-shadow: #fffa 0px 0px 100px 60px;
				opacity: 1;
			}

			.leaflet-markers-green-pane {
				z-index: 100 !important;
			}

			/* dark background *
			#wrapper {
				background-color: #061f36ee;
			}

			#overlay {
				background-image: none;
			}

			#overlay h2 {
				color: #eeec;
			}

			#logo {
				filter: invert(1);
				opacity: 0.15;
			}

			.leaflet-countour-fg-pane,
			.leaflet-countour-pane {
				filter: grayscale(1) invert(1);
				opacity: 0.95;
			}

			#small-map {
				filter: grayscale(1);
				opacity: 0.6;
			}

			legend {
				color: #fffc;
				background: #fff1;
				box-shadow: none;
			}**/
		</style>

	</body>
</html>